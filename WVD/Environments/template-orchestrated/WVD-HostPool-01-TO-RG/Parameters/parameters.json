{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    // Shared
    "wvdLocation": {
      "value": "" // updated by pipeline
    },
    "workspaceId": {
      "value": "" // updated by pipeline
    },
    "enableWvdResources": {
      "value": false // updated by pipeline
    },
    "enableVmResources": {
      "value": false // updated by pipeline
    },
    "enableVmExtensions": {
      "value": false // updated by pipeline
    },
    "enableHostPoolJoin": {
      "value": false // updated by pipeline
    },
    "enablePostVmResources": {
      "value": false // updated by pipeline
    },
    "componentStorageAccountId":{
      "value": "" // updated by pipeline
    },
    "componentsStorageContainerName": {
      "value": "" // updated by pipeline
    },
    // Resource Group
    "rgParameters": {
      "value": {
        "enabled": true,
        "moduleName": "ResourceGroup",
        "moduleVersion": "1.0.0",
        "resourceGroupName": "" // updated by pipeline
      }
    },
    // Host Pool
    "hostPoolParameters": {
      "value": {
        "enabled": true,
        "moduleName": "WvdHostPools",
        "moduleVersion": "1.0.0",
        "name": "avd-hp",
        "hostpoolFriendlyName": "AVD-HostPool",
        "hostpoolDescription": "Primary HostPool",
        "hostpoolType": "Pooled",
        "personalDesktopAssignmentType": "",
        "maxSessionLimit": 30,
        "loadBalancerType": "DepthFirst",
        "customRdpProperty": "audiocapturemode:i:1;audiomode:i:0;camerastoredirect:s:*;drivestoredirect:s:;redirectclipboard:i:1;redirectcomports:i:1;redirectprinters:i:1;redirectsmartcards:i:1;screen mode id:i:2;",
        "validationEnviroment": true,
        "startVMOnConnect": false
      }
    },
    // App Groups
    "appGroupParameters": {
      "value": {
        "enabled": true,
        "moduleName": "WvdApplicationGroups",
        "moduleVersion": "1.0.0",
        "agParametersArray": [
          // Desktop
          {
            "name": "sxx-az-avdag-wus-x-001",
            "appGroupType": "Desktop",
            "appGroupFriendlyName": "Remote Applications 1",
            "appGroupDescription": "This is my first Remote Applications bundle",
            "roleAssignments": [
            //   {
            //     "roleDefinitionIdOrName": "Desktop Virtualization User",
            //     "principalIds": [
            //       "<ReplaceWith-PrincipalId>"
            //     ]
            //   }
            ]
          }
        ]
      }
    },
    // Workspace
    "workspaceParameters": {
      "value": {
        "enabled": true,
        "moduleName": "WvdWorkspaces",
        "moduleVersion": "1.0.0",
        "name": "sxx-az-avdws-wus-x-001",
        "workspaceFriendlyName": "My first WVD Workspace",
        "workspaceDescription": "This is My first WVD Workspace"
      }
    },
    // Virtual Machines (Session Hosts)
    "vmParameters": {
      "value": {
        "enabled": true,
        "moduleName": "VirtualMachines",
        "moduleVersion": "1.0.0",
        "vmNamePrefix": "iac",
        "vmNumberOfInstances": 2,
        "vmInitialNumber": 0,
        "vmSize": "Standard_D2s_v5",
        "imageReference": {
            
              "publisher": "MicrosoftWindowsServer",
              "offer": "WindowsServer",
              "sku": "2016-Datacenter",
              "version": "latest"
         
        },
        "osDisk": {
          "createOption": "fromImage",
          "diskSizeGB": "128",
          "managedDisk": {
            "storageAccountType": "Premium_LRS"
          }
        },
        "adminUsername": "localAdminUser",
        "adminPassword": {
          "keyVault": {
            "id": "/subscriptions/b0c05537-02c7-4099-b9af-ab0702d33d39/resourceGroups/myAvdWorkFlowCall371231/providers/Microsoft.KeyVault/vaults/kvng2gfnoz2zgrq"
          },
          "secretName": "localAdmin-Password"
        },
        "availabilitySetName": "avd-avSet-westus",
        // "maxNumberOfVmsPerAvSet": <ReplaceWith-MaxNumberOfVmsPerAvSet>,
        // "useAvailabilityZone": <ReplaceWith-UseAvailabilityZone>,
        // "windowsConfiguration": {
        //   "timeZone": "<ReplaceWith-TimeZone>"
        // },
        "nicConfigurations": [
          {
            "nicSuffix": "-nic-01", //e.g. -nic-01
            "ipConfigurations": [
              {
                "name": "ipconfig1",
                "subnetId": "/subscriptions/b0c05537-02c7-4099-b9af-ab0702d33d39/resourceGroups/rg_connectivity_avd_westus2/providers/Microsoft.Network/virtualNetworks/vnet-avd-westus2/subnets/snet-avd-westus2"
              }
            ]
          }
        ],
        "domainName": "y3qjt.onmicrosoft.com",
        "domainJoinUser": "domainJoinUser@y3qjt.onmicrosoft.com",
        "domainJoinPassword": {
          "keyVault": {
            "id": "/subscriptions/b0c05537-02c7-4099-b9af-ab0702d33d39/resourceGroups/myAvdWorkFlowCall371231/providers/Microsoft.KeyVault/vaults/kvng2gfnoz2zgrq"
          },
          "secretName": "domainJoinUser-Password"
        },
        // "domainJoinOU": "<ReplaceWith-DomainJoinOU>",
        "domainJoinRestart": false // Required to pull GPOs
        // "windowsScriptExtensionFileData": [
        //   {
        //     "uri": "<ReplaceWith-Uri>",
        //     "storageAccountId": "<ReplaceWith-StorageAccountId>"
        //   }
        // ]
      }
    },
    // Applications
    "appParameters": {
      "value": {
        "enabled": true,
        "moduleName": "WvdApplications",
        "moduleVersion": "1.0.0",
        "appParametersArray": [
          {
            "appGroupName": "WorkRelatedApps",
            "applications": [
              {
                "name": "notepad",
                "description": "Notepad by ARM template",
                "friendlyName": "Notepad",
                "filePath": "C:\\Windows\\System32\\notepad.exe",
                "commandLineSetting": "DoNotAllow",
                "commandLineArguments": "",
                "showInPortal": true,
                "iconPath": "C:\\Windows\\System32\\notepad.exe",
                "iconIndex": 0
              }
              // Example Teams
              //   ,{
              //     "name": "Microsoft Teams",
              //     "description": "Microsoft Teams by ARM template",
              //     "friendlyName": "Microsoft Teams",
              //     "filePath": "C:\\Program Files (x86)\\Microsoft\\Teams\\current\\Teams.exe",
              //     "commandLineSetting": "DoNotAllow",
              //     "commandLineArguments": "",
              //     "showInPortal": true,
              //     "iconPath": "C:\\Program Files (x86)\\Microsoft\\Teams\\current\\Teams.exe",
              //     "iconIndex": 0
              // }
            ]
          }
        ]
      }
    },
    // Scaling Scheduler (Auto Scaling)
    "scalingParameters": {
      "value": {
        "enabled": true,
        "moduleName": "WvdScalingScheduler",
        "moduleVersion": "1.0.0",
        "logicAppName": "<ReplaceWith-LogicAppName>",
        "webhookURI": {
          "keyVault": {
            "id": "<ReplaceWith-Id>"
          },
          "secretName": "<ReplaceWith-SecretName>"
        },
        "actionSettingsBody": {
          "ResourceGroupName": "<ReplaceWith-ResourceGroupName>",
          "HostPoolName": "<ReplaceWith-HostPoolName>",
          "UtcOffset": "<ReplaceWith-UtcOffset>",
          "BeginPeakTime": "<ReplaceWith-BeginPeakTime>",
          "EndPeakTime": "<ReplaceWith-EndPeakTime>",
          "SessionThresholdPerCPU": "<ReplaceWith-SessionThresholdPerCPU>",
          "MinimumNumberOfRDSH": "<ReplaceWith-MinimumNumberOfRDSH>",
          "LimitSecondsToForceLogOffUser": "<ReplaceWith-LimitSecondsToForceLogOffUser>",
          "LogOffMessageTitle": "<ReplaceWith-LogOffMessageTitle>",
          "LogOffMessageBody": "<ReplaceWith-LogOffMessageBody>",
          "LAWorkspaceName": "<ReplaceWith-LAWorkspaceName>",
          "stateStorageAccountName": "<ReplaceWith-StateStorageAccountName>",
          "stateTableName": "<ReplaceWith-StateTableName>"
        },
        "recurrenceInterval": 15
      }
    }
    // ,
    // Shared
    // "tags": {
    //   "value": {
    //     "Environment": "<ReplaceWith-Environment>",
    //     "Contact": "<ReplaceWith-Contact>",
    //     "PurchaseOrder": "<ReplaceWith-PurchaseOrder>",
    //     "CostCenter": "<ReplaceWith-CostCenter>",
    //     "ServiceName": "<ReplaceWith-ServiceName>",
    //     "Role": "<ReplaceWith-Role>"
    //   }
    // }
  }
}
